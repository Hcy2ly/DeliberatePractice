# 大厂研发流程

## 1 需求文档

一方面是倒逼产品经理去系统性的思考这个需求究竟有哪些功能，用来满足哪些用户的需求。另一方面，是保证我们在研发的时候，研发出来的功能是满足需求文档里所描述的。
每个阶段的需求文档相当于是把这个项目的整个迭代过程都记录下来了。这样也方便后面的人，了解这个项目是如何迭代的。

## 2 这个需求包含了哪些功能

我们要把产品经理角度上的这个功能，拆解为我们代码角度上的具体应该开发的那些功能。因为通常用户看起来好像微不足道的小功能。例如点击登录，点击下单，后台都有很多模块协同运行的。

## 3 确定有哪些难点

这个功能有哪些难点，我们要克服这个难点，所需要花费的时间，都要有一个大体的量化。确定了自己的工作难点，把这些难点都记录下来，对于项目组来说记录每一个迭代版本有哪些难点，这些难点团队是如何克服的，对个人晋升也很材料可以证明，对于以后跳槽，个人成长来说也是很重要的。

## 4 画架构图

一般来说，大厂项目的架构都是比较复杂的，特别是后端架构。
如果添加一个模块连个文档都没有，连个图也没有，上来就添加，看代码的话，后面的人是很难维护的。当想要快速开发一个新的模块，假设之前团队有人把这个架构图画清楚了，你只需要看一眼这个架构图，就知道你的模块应该添加在哪里。那么你去添加模块的时候，也应该把这个架构图相应的位置 完善一下。同时呢，在画架构图的过程中，也增添了自己对整个系统架构的掌握程度

## 5 定协议

后台模块之间进行通讯需要协议，后台和前端通讯也需要协议。所以只要有交互，就要确定协议的数据格式。
定协议要考虑到兼容，要考虑易于维护。

## 6 设计数据结构和算法

其实设计数据结构更多一些，因为我们要选择使用什么容器，什么格式来处理我们的数据。至于算法，一般就是直接调包了，这面试造火箭，工作拧螺丝 就体现在这里。
为什么会这样呢？ 一个很简单的例子，互联网研发讲究其实就是要快，例如一个功能 2 天就要开发完，如果算法都要自己去写的话，等都写完了，花都谢了。

## 7 预估一下容量

特别是后端开发，要估计出 我们自己模块大体需要多大磁盘，多大内存，多大带宽，多少核 CPU。这也是没有做过研发工作的同学经常忽略的，因为大家好像默认 磁盘、内存、带宽、cpu 是无穷的。

## 8 考虑部署 做好风控

要考虑如果一台机器挂了（可能是硬件原因），那么我们的模块还能不能正常提供服务。
这就是考虑**模块的容灾性**，一般都是采用分布式，服务部署在三台机器上，一台如果挂了，还有其他两台提供服务。还有就是要**弹性可伸缩**，即我们的模块可不可以直接 部署多台机器来提高承载能力。如果用户量突然上来了，或者流量突然上来了，可以通过快速部署多台机器来抗住流量。而不是模块只能在单机上跑，多部署几台就发生各种问题。要提前考虑突发情况（互联网的世界大多就是体量、内存、速度等），做好风险控制。

## 9 设计评审

前八的阶段其实都是设计阶段，大家主要也是看看你的模块 会不会给其他模块或者整个系统带来什么问题 以及 设计的是否合理。

## 10 写代码

终于到写代码的阶段了，其实到这时候，是最容易的。（写代码就是体力活了，不是脑力活了。）

## 11 自测

写完代码，我们需要自测，自己的功能会不会有什么问题。这里可能需要自己造一造数据，跑一跑 看看和预想的是不是一样的。或者是自己跑一下测试用例等等。

## 12 联调

自己的模块可能会涉及到其他模块之间的一个交互，或者和前端的一个交互。所以需要其他同学配合一起沟通、一起测试。通常需要消耗一定的时间，用于发现问题，解决问题，同步进度等，最后一起提测。

## 13 提测 + 视觉验收

代码经过自测联调，在本地环境无任何问题，提交到测试环境，给测试同学测试。如果测试同学测出问题，你就要判断是样式（视觉验收）、逻辑确实有问题还是测试方式不对，如果有问题就要修改，再提给测试。

## 14 code review

提测结束，合代码之前，需要进行代码 review，确保代码风格、代码质量等是否符合团队开发标准。没问题就可以申请合入主分支。

## 15 合入主干

通常合代码也会带来一些问题，多人协同开发时候，容易产生冲突，那么就需要重新拉分支，解决冲突，并且量级教大改动的时候，不仅需要自测，还需要测试回归测试。

## 16 发布上线

本地的代码或者某台机器的代码，编译成可执行文件，然后更新到 线上的服务器（一个独立的集群，专门处理线上的流量）并运行起来。上线是最重要的一步了，也很容易出问题，因为一个大型项目，其上线的过程都非常复杂（要更新上百台机器的集群），而且要考虑线上新版和旧版本的兼容问题。所以一般用户体量较大的公司，都选择深夜发布上线。
